package com.example.myapplication;import android.app.Activity;import android.content.SharedPreferences;import android.os.Bundle;import android.util.Log;import android.view.View;import android.widget.Button;import android.widget.TextView;import com.example.myapplication.utils.SerialPortUtil;import org.greenrobot.eventbus.EventBus;import org.greenrobot.eventbus.Subscribe;import org.greenrobot.eventbus.ThreadMode;import java.io.File;import java.io.IOException;import java.security.InvalidParameterException;public class Serial_Activity extends Activity {    private String TAG = "Serial_Activity";    private Button button;    private TextView tv;    private SerialPortUtil serialPortUtil;    @Override    protected void onCreate(Bundle savedInstanceState) {        super.onCreate(savedInstanceState);        setContentView(R.layout.activity_serial_);        button = (Button) findViewById(R.id.btn);        tv = (TextView) findViewById(R.id.tv);        serialPortUtil = new SerialPortUtil();        //serialPortUtil.openSerialPort(" /dev/ttysWK3");        serialPortUtil.openSerialPort();        //注册EventBus        EventBus.getDefault().register(this);        button.setOnClickListener(new View.OnClickListener() {            @Override            public void onClick(View v) {                serialPortUtil.sendSerialPort(Cmd.OPEN_DOOR);            }        });    }    /**     * 用EventBus进行线程间通信，也可以使用Handler     * @param string     */    @Subscribe(threadMode = ThreadMode.MAIN)    public void onEventMainThread(String string){        Log.d(TAG,"获取到了从传感器发送到Android主板的串口数据");        tv.setText(string);    }    public interface Cmd {        String OPEN_DOOR = "010100000000FFFF";    }}